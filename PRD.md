# 灶边记 - 产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品定位
一个专注于本地菜谱管理的移动应用，帮助用户快速记录、整理、搜索菜谱，支持分类管理和制作步骤记录。后期可扩展为云同步版本。

### 1.2 核心价值
- 快速记录和查找菜谱
- 本地存储，无需网络依赖
- 记录烹饪经验和食材管理
- 提升厨房使用体验

### 1.3 目标用户
- 经常在家做饭的用户
- 需要管理菜谱和食材的家庭主厨
- 希望记录和积累烹饪经验的美食爱好者

## 2. 功能规划

### 2.1 菜谱管理模块

#### 2.1.1 核心功能
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 菜谱搜索 | 按菜名/分类/食材搜索 | P0 |
| 分类管理 | 默认分类（家常菜、凉菜、甜品等）+ 自定义分类 | P0 |
| 菜谱添加 | 菜名、分类、封面、配料、制作步骤 | P0 |
| 菜谱编辑 | 修改已有菜谱信息 | P0 |
| 步骤查看 | 图文混排步骤展示，支持全屏查看 | P0 |

#### 2.1.2 增强功能
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 菜谱等级 | 每做一次菜等级+1，记录制作次数 | P1 |
| 自我评价 | 做完后评分+心得（文字/图片） | P1 |
| 收藏功能 | 常做的菜收藏到"常做"列表 | P1 |
| 最近浏览 | 记录最近查看的菜谱 | P2 |

### 2.2 食材管理模块

#### 2.2.1 核心功能
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 食材分类 | 蔬菜/肉类/海鲜/调味品/主食等默认分类 | P0 |
| 食材库存 | 记录食材名称、数量、单位 | P0 |
| 快速添加 | 搜索已有食材或新增食材 | P0 |
| 内置食材库 | 预置常见食材，提升用户体验 | P1 |

#### 2.2.2 扩展功能
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 保质期提醒 | 食材到期提醒（后期功能） | P2 |
| 采购清单 | 根据菜谱生成购物清单 | P2 |

### 2.3 数据管理模块

| 功能 | 描述 | 优先级 |
|------|------|--------|
| 本地存储 | 使用Hive进行本地数据存储 | P0 |
| 数据备份 | 导出JSON格式数据 | P1 |
| 数据恢复 | 从JSON文件导入数据 | P1 |

## 3. 用户界面设计

### 3.1 主要页面结构

#### 3.1.1 首页
- 顶部搜索框
- 分类标签（横向滚动）
- 常做菜模块（按制作次数排序）
- 菜谱卡片列表（封面 + 名称 + 等级/制作次数）

#### 3.1.2 菜谱详情页
- 菜名、分类、等级显示
- 最近评价展示
- 配料表
- 制作步骤（图文混排）
- "我做了这道菜"按钮（触发评分和笔记）

#### 3.1.3 添加/编辑菜谱页
- 菜名输入
- 分类选择（或新建分类）
- 封面图片选择
- 配料添加（动态增减）
- 步骤添加（文字 + 图片）

#### 3.1.4 食材管理页
- 分类Tab切换
- 食材卡片（名称 + 数量 + 单位）
- 悬浮添加按钮
- 搜索和新增食材弹窗

### 3.2 设计风格
- **色彩主题**: 厨房温暖色系（米白、暖黄、木色）
- **交互动效**: 卡片过渡动画，提升用户体验
- **字体**: 清晰易读，适合厨房环境使用

## 4. 技术实现

### 4.1 技术栈
- **框架**: Flutter
- **本地存储**: Hive
- **状态管理**: Provider/Riverpod
- **图片处理**: image_picker
- **搜索**: 本地模糊匹配 + 拼音匹配

### 4.2 数据模型

#### 4.2.1 菜谱模型
```dart
class Recipe {
  String id;
  String name;
  String categoryId;
  String? coverImage;
  List<Ingredient> ingredients;
  List<Step> steps;
  int cookCount;
  double rating;
  List<Review> reviews;
  DateTime createdAt;
  DateTime updatedAt;
}
```

#### 4.2.2 食材模型
```dart
class Ingredient {
  String id;
  String name;
  String categoryId;
  double quantity;
  String unit;
  DateTime? expiryDate;
}
```

#### 4.2.3 分类模型
```dart
class Category {
  String id;
  String name;
  String type; // recipe or ingredient
  bool isDefault;
}
```

### 4.3 核心功能实现

#### 4.3.1 搜索功能
- 菜名模糊匹配
- 分类筛选
- 食材关联搜索
- 拼音搜索支持

#### 4.3.2 图片管理
- 本地图片存储
- 图片压缩优化
- 全屏查看支持

#### 4.3.3 数据同步
- 本地Hive数据库
- JSON导入导出
- 数据版本管理

## 5. 开发计划

### 5.1 第一阶段 (MVP)
- [ ] 基础UI框架搭建
- [ ] 菜谱CRUD功能
- [ ] 基础搜索功能
- [ ] 本地数据存储

### 5.2 第二阶段
- [ ] 食材管理功能
- [ ] 图片上传和管理
- [ ] 分类管理
- [ ] 搜索优化

### 5.3 第三阶段
- [ ] 评价和等级系统
- [ ] 数据备份恢复
- [ ] UI优化和动效
- [ ] 性能优化

## 6. 内置数据

### 6.1 默认菜谱分类
- 家常菜
- 凉菜
- 甜品
- 汤品
- 主食

### 6.2 默认食材分类及示例

#### 蔬菜类
土豆、西红柿、黄瓜、青椒、大葱、生姜、大蒜、白菜、萝卜、茄子

#### 肉类
猪肉、鸡肉、牛肉、羊肉、鸭肉

#### 海鲜类
鲤鱼、鲫鱼、虾、螃蟹、带鱼、鲅鱼

#### 调味品
盐、酱油、醋、辣椒、花椒、八角、料酒、生抽、老抽、蚝油

#### 主食类
大米、面粉、鸡蛋、馒头、面条、饺子皮

## 7. 成功指标

### 7.1 用户体验指标
- 菜谱添加完成率 > 90%
- 搜索成功率 > 95%
- 应用启动时间 < 2秒

### 7.2 功能使用指标
- 平均每用户菜谱数量 > 10
- 食材管理使用率 > 60%
- 数据备份使用率 > 30%

## 8. 风险评估

### 8.1 技术风险
- 本地存储容量限制
- 图片文件管理复杂度
- 跨平台兼容性问题

### 8.2 用户体验风险
- 初次使用学习成本
- 数据迁移困难
- 离线使用限制

### 8.3 解决方案
- 实现数据压缩和清理机制
- 提供详细的用户引导
- 设计简洁直观的操作流程